# nva

nva provides an R interface to the [Norwegian National Research Archive
(NVA)](https://nva.sikt.no) API. It covers both the NVA publication
search and the [Cristin](https://www.cristin.no/) registry for persons,
organizations, and projects.

## Installation

``` r
# install.packages("pak")
pak::pak("roarstovner/nva")
```

## Usage

### Search publications

``` r
library(nva)

# Basic search
nva_search("climate change")

# Filter by year and organization
nva_search("machine learning", year = 2024, organization = "194")
```

### Publication details and files

``` r
# Full record (returns a list)
pub <- nva_publication("01907b56-a6b0-7b8c-8f79-12345abcdef")

# List and download files
files <- nva_publication_files("01907b56-a6b0-7b8c-8f79-12345abcdef")
nva_download_file(files$identifier[1], destfile = "paper.pdf")
```

### Cristin: persons, organizations, projects

``` r
# Search for researchers
nva_cristin_person_search(query = "Hansen")

# Organization hierarchy
nva_cristin_organization_subunits(185, depth = 2)

# Research projects
nva_cristin_project_search(query = "climate", status = "ACTIVE")
```

### Pagination

``` r
# Automatically fetch all pages
all_pubs <- nva_search("biodiversity", organization = "185", fetch_all = TRUE)
```

## Authentication

Most endpoints are public. For non-public data, set an API key:

``` r
nva_set_api_key("your-api-key")
```

Or add `NVA_API_KEY=your_key` to your `.Renviron` (use
`usethis::edit_r_environ()`).

## Learn more

- [Getting started
  vignette](https://roarstovner.github.io/nva/articles/nva.html)
- [Function reference](https://roarstovner.github.io/nva/reference/)
- [NVA API documentation](https://swagger-ui.nva.unit.no)

# Package index

## Search

Search publications in the NVA archive.

- [`nva_publication_search()`](https://roarstovner.github.io/nva/reference/nva_publication_search.md)
  [`nva_search()`](https://roarstovner.github.io/nva/reference/nva_publication_search.md)
  : Search NVA publications
- [`nva_publication_search_aggregations()`](https://roarstovner.github.io/nva/reference/nva_publication_search_aggregations.md)
  [`nva_search_aggregations()`](https://roarstovner.github.io/nva/reference/nva_publication_search_aggregations.md)
  : Get aggregations (facet counts) for an NVA search

## Publications

Retrieve and download publications and files.

- [`nva_publication()`](https://roarstovner.github.io/nva/reference/nva_publication.md)
  : Get a publication by identifier
- [`nva_publications()`](https://roarstovner.github.io/nva/reference/nva_publications.md)
  : Get multiple publications by identifiers
- [`nva_publication_files()`](https://roarstovner.github.io/nva/reference/nva_publication_files.md)
  : Get files associated with a publication
- [`nva_download_file()`](https://roarstovner.github.io/nva/reference/nva_download_file.md)
  : Download a file from a publication

## Cristin People

Look up researchers in the Cristin registry.

- [`nva_cristin_person()`](https://roarstovner.github.io/nva/reference/nva_cristin_person.md)
  : Get a Cristin person by ID
- [`nva_cristin_persons()`](https://roarstovner.github.io/nva/reference/nva_cristin_persons.md)
  : Get multiple Cristin persons by identifiers
- [`nva_cristin_person_search()`](https://roarstovner.github.io/nva/reference/nva_cristin_person_search.md)
  : Search for Cristin persons
- [`nva_cristin_person_publications()`](https://roarstovner.github.io/nva/reference/nva_cristin_person_publications.md)
  : Get publications for a Cristin person

## Cristin Organizations

Look up organizations in the Cristin registry.

- [`nva_cristin_organization()`](https://roarstovner.github.io/nva/reference/nva_cristin_organization.md)
  : Get a Cristin organization by ID
- [`nva_cristin_organizations()`](https://roarstovner.github.io/nva/reference/nva_cristin_organizations.md)
  : Get multiple Cristin organizations by identifiers
- [`nva_cristin_organization_search()`](https://roarstovner.github.io/nva/reference/nva_cristin_organization_search.md)
  : Search for Cristin organizations
- [`nva_cristin_organization_subunits()`](https://roarstovner.github.io/nva/reference/nva_cristin_organization_subunits.md)
  : Get subunits of a Cristin organization
- [`nva_cristin_organization_publications()`](https://roarstovner.github.io/nva/reference/nva_cristin_organization_publications.md)
  : Get publications for a Cristin organization
- [`nva_cristin_organization_persons()`](https://roarstovner.github.io/nva/reference/nva_cristin_organization_persons.md)
  : Get persons affiliated with a Cristin organization
- [`nva_cristin_organization_projects()`](https://roarstovner.github.io/nva/reference/nva_cristin_organization_projects.md)
  : Get projects associated with a Cristin organization

## Cristin Projects

Look up research projects in the Cristin registry.

- [`nva_cristin_project()`](https://roarstovner.github.io/nva/reference/nva_cristin_project.md)
  : Get a Cristin project by ID
- [`nva_cristin_projects()`](https://roarstovner.github.io/nva/reference/nva_cristin_projects.md)
  : Get multiple Cristin projects by identifiers
- [`nva_cristin_project_search()`](https://roarstovner.github.io/nva/reference/nva_cristin_project_search.md)
  : Search for Cristin projects
- [`nva_cristin_project_categories()`](https://roarstovner.github.io/nva/reference/nva_cristin_project_categories.md)
  : Get Cristin project categories

## Cristin Other

Keywords, funding sources, and countries from Cristin.

- [`nva_cristin_keyword()`](https://roarstovner.github.io/nva/reference/nva_cristin_keyword.md)
  : Get a Cristin keyword by ID
- [`nva_cristin_keyword_search()`](https://roarstovner.github.io/nva/reference/nva_cristin_keyword_search.md)
  : Search for Cristin keywords
- [`nva_cristin_funding_source()`](https://roarstovner.github.io/nva/reference/nva_cristin_funding_source.md)
  : Get a specific funding source
- [`nva_cristin_funding_source_search()`](https://roarstovner.github.io/nva/reference/nva_cristin_funding_source_search.md)
  : Search funding sources from Cristin
- [`nva_cristin_countries()`](https://roarstovner.github.io/nva/reference/nva_cristin_countries.md)
  : Get Cristin countries

## Verified Funding

Look up verified funding from the Research Council of Norway.

- [`nva_verified_funding_nfr()`](https://roarstovner.github.io/nva/reference/nva_verified_funding_nfr.md)
  : Get a specific NFR funding record
- [`nva_verified_funding_nfr_search()`](https://roarstovner.github.io/nva/reference/nva_verified_funding_nfr_search.md)
  : Search verified NFR funding

## Configuration

API key management.

- [`nva_set_api_key()`](https://roarstovner.github.io/nva/reference/nva_set_api_key.md)
  : Set NVA API key
- [`nva_has_api_key()`](https://roarstovner.github.io/nva/reference/nva_has_api_key.md)
  : Check if NVA API key is configured

# Articles

### All vignettes

- [Getting started with
  nva](https://roarstovner.github.io/nva/articles/nva.md):
